---
title: "Run MKL benchmarks"
author: "Andrie de Vries"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Run MKL benchmarks}
  %\VignetteEngine{knitr::rmarkdown}
  %\usepackage[utf8]{inputenc}
---

# Running the tests

```{r init, include=FALSE}
library("version.compare")
library("knitr")
```
```{r}
scale.factor <- 0.5
```

The package allows you to run benchmark tests on several different installations of R on the same machine.

This vignette scales the test sets down to `r sprintf("%1.0f%%", 100*scale.factor)` of standard size, to speed up the process for sake of illustration. For a full-scale test, adjust the tests by setting `scale.factor = 1`.

```{r benchmark, echo=FALSE}
r <- findRscript(version = "3.2.3.*x64")
test.results <- RevoMultiBenchmark(rVersions = r, threads = c(1, 4), scale.factor = scale.factor)
```


# Compare results

## Elapsed time (seconds)

Compare total elapsed time

```{r compare-results, echo = FALSE, fig.width=6, fig.height=3, out.width="800px", dpi=1200}
kable(test.results)
plot(test.results, theme_size=8, main = "Elapsed time")
```

## Relative performance

Compare relative performance

```{r performance-speed-up, echo = FALSE, fig.width=6, fig.height=3, out.width="800px", dpi=1200}
kable(urbanekPerformance(test.results), digits = 2)
plot(urbanekPerformance(test.results), theme_size=8, main = "Relative Performance")
```

